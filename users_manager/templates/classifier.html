{% extends "base.html" %}
{% load static %}

{% block title %} Home {% endblock %}

{% block content %}

<div id="div1_clasifier" class="card">
    
  <div style="text-align: center;">
    <h2>{{ file_name }}</h2><br>
  </div>

  <!--Grafica 1-->   
  <h3>Resumen general de la conversasion</h3>
  <p>Mensajes agresivos: {{dataG.1}}</p><br>
  <p>Mensajes no agresivos: {{dataG.0}}</p>

  <div id="container">
    <canvas id="pie-chart"></canvas>
  </div>
  <!--Grafica 2-->
  <h3>Resumen general de {{users.0}}</h3>
  <p>Mensajes agresivos: {{dataU1.0}}</p><br>
  <p>Mensajes no agresivos: {{dataU1.1}}</p>

  <div id="container">
    <canvas id="grafica2"></canvas>
  </div>

  <div id="container">
    <canvas id="grafica2"></canvas>
  </div>

  <!--Grafica 3-->
  <h3>Resumen general de {{users.1}}</h3>
  <p>Mensajes agresivos: {{dataU2.0}}</p><br>
  <p>Mensajes no agresivos: {{dataU2.1}}</p>
  <div id="container">
    <canvas id="grafica3"></canvas>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/chart.js@2.9.3/dist/Chart.min.js"></script>
  <script>
    var config = {
      type: 'pie',
      data: {
        datasets: [{
          data: {{ dataG | safe }},
          backgroundColor: [
            '#1A1A1A', '#DEDBDB'
          ],
          label: 'Clasificador'
        }],
        labels: {{ labelsG|safe }}
      },
      options: {
        responsive: true
      }
    };


    var config2 = {
      type: 'pie',
      data: {
        datasets: [{
          data: {{ dataU1 | safe }},
          backgroundColor: [
            '#1A1A1A', '#DEDBDB'
          ],
          label: 'Clasificador'
        }],
        labels: {{ labelsU1 | safe }}
      },
      options: {
        responsive: true
      }
    };

    var config3 = {
      type: 'pie',
      data: {
        datasets: [{
          data: {{ dataU2 | safe }},
          backgroundColor: [
            '#1A1A1A', '#DEDBDB'
          ],
          label: 'Clasificador'
        }],
        labels: {{ labelsU2 | safe }}
      },
      options: {
        responsive: true
      }
    };

    window.onload = function() {
      var ctx = document.getElementById('pie-chart').getContext('2d');
      var ctx2 = document.getElementById('grafica2').getContext('2d');
      var ctx3 = document.getElementById('grafica3').getContext('2d');
      window.myPie = new Chart(ctx, config);
      window.grafica = new Chart(ctx2, config2);;
      window.grafica3 = new Chart(ctx3, config3);
    };

  </script>
  <br><br>
  <div style="width: 800px; height: 200px; box-shadow: 0 0 15px 2px rgb(207, 207, 207);">
    <table style="width: 700px">
      <caption>{{ file_name }} </caption>
      <!--Para distinguir usuarios: "if users.0 == objeto.user"-->
      {% for objeto in lista %}
      <tr> 
          <td>{{ objeto.user }}: </td>
          {%if objeto.predict == 1 %}
          <td style="color: brown;">{{ objeto.message }}</td>
          {% else %}
          <td style="color: black">{{ objeto.message }}</td>
          {% endif %}
      </tr>
      {% endfor %}   
    </table>
  </div>
</div>

{% endblock %}